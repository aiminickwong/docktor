<div data-ng-controller="ServicesController" data-ng-init="findOne()">

    <div class="ui purple menu">
        <div class="item">
            <a><i class="protect icon"></i> Admin</a>
        </div>
        <div class="item">
            <a href="#!/admin/services"><i class="tags icon"></i> Services</a>
        </div>

        <div class="item active" ng-hide="service._id">
            <a><i class="tag icon"></i> Create Service</a>
        </div>
        <div class="item active" ng-show="service._id">
            <a href="#!/admin/services/{{group._id}}"><i class="tag icon"></i> Edit {{service.title}}</a>
        </div>
    </div>

    <div class="ui segment">

        <form name="serviceForm" class="ui form" novalidate>
            <div class="two fields">
                <div class="field">

                    <label>Title</label>
                    <input name="title" ng-model="service.title" ng-pattern="patternTitle" ng-required="true"
                           type="text"
                           md-maxlength="200">

                    <div ng-messages="serviceForm.title.$error">
                        <div ng-message="required">This is required.</div>
                        <div ng-message="md-maxlength">Max length of title : 200</div>
                        <div ng-message="pattern">Title have to match this pattern : [a-zA-Z0-9_]{1,200}.</div>
                    </div>
                </div>
            </div>

            <div class="field" ng-hide="service._id">
                <button class="ui primary button" ng-click="submitForm()">
                    Create
                </button>
            </div>

            <div class="field" ng-show="service._id">
                <button ng-click="submitForm()" class="ui primary button" ng-hide="askDeleteService">
                    <i class="fa fa-save"></i> Save Service
                </button>
                <button class="ui red button" ng-click="askDeleteService=true"
                        ng-hide="askDeleteService">
                    <i class="fa fa-trash-o"></i> Delete Service
                </button>
                <button ng-click="askDeleteService=false" ng-show="askDeleteService"
                        class="ui red button">
                    No, I don't want to delete this. <i class="fa fa-reply"></i>
                </button>
                <button data-ng-click="remove(service);" ng-show="askDeleteService"
                        class="ui red button">
                    Yes, I confirm <i class="fa fa-exclamation-triangle"></i>
                </button>
            </div>
        </form>
    </div>
    <md-subheader class="row md-warn" ng-show="error">
        <strong data-ng-bind="error"></strong>
    </md-subheader>
    </form>

    <div ng-if="service._id">
        <md-tabs class="md-primary" md-selected="tabs.selectedIndex">
            <md-tab id="tabImages" aria-controls="tabImages-content">
                Images
            </md-tab>
            <md-tab id="tabCommands" aria-controls="tabCommands-content">
                Commands
            </md-tab>
            <md-tab id="tabUrls" aria-controls="tabUrls-content">
                Urls
            </md-tab>
            <md-tab id="tabJobs" aria-controls="tabJobs-content">
                Jobs
            </md-tab>
        </md-tabs>
        <ng-switch on="tabs.selectedIndex">
            <div role="tabpanel" id="tabImages-content" aria-labelledby="tabImages" ng-switch-when="0">
                <div class="md-whiteframe-z5"
                     ng-include="'/modules/services/views/images/list-images.client.view.html'"></div>
            </div>
            <div role="tabpanel" id="tabCommands-content" aria-labelledby="tabCommands" ng-switch-when="1">
                <div class="md-whiteframe-z5"
                     ng-include="'/modules/services/views/list-commands.client.view.html'"></div>
            </div>
            <div role="tabpanel" id="tabUrls-content" aria-labelledby="tabUrls" ng-switch-when="2">
                <div class="md-whiteframe-z5"
                     ng-include="'/modules/services/views/list-urls.client.view.html'"></div>
            </div>
            <div role="tabpanel" id="tabJobs-content" aria-labelledby="tabJobs" ng-switch-when="3">
                <div class="md-whiteframe-z5"
                     ng-include="'/modules/services/views/list-jobs.client.view.html'"></div>
            </div>
        </ng-switch>
        <div class="md-whiteframe-z5">
            <md-button ng-click="submitForm()" class="md-raised md-primary" ng-hide="askDeleteService">
                <i class="fa fa-save"></i> Save Service
            </md-button>
        </div>
    </div>
</div>
