<section data-ng-controller="JobsOverviewController" data-ng-init="find()">

    <div layout="row">
        <h2 flex>Admin / Jobs / Overview</h2>

        <div flex layout="row" layout-align="end center">
            <div>Legend :</div>
            <div class="job success">Ok</div>
            <div class="job error">Ko</div>
        </div>
    </div>

    <table class="table">
        <thead>
        <tr>
            <th>Groups</th>
            <th ng-repeat="service in services">
                {{service.title}}
            </th>
        </tr>
        </thead>
        <tbody>

        <tr ng-repeat="group in groups">
            <td>{{group.title}}</td>
            <td ng-repeat="service in services" layout="row">
                <div ng-repeat="job in overview[group._id].services[service._id].jobs" layout="row" class="job"
                     ng-click="showInfo(group._id, job)">
                    <md-button ng-if="job.status==='success'" class="job success">.
                    </md-button>
                    <md-button ng-if="job.status==='error'" class="job error">.
                    </md-button>
                </div>
            </td>
        </tr>
        </tbody>
    </table>

    <md-button class="md-accent" href="#!/admin/jobs/history">View all history</md-button>

    <md-toolbar class="md-accent" layout-align="center center" data-ng-if="jobs.$resolved && !jobs.length">
        No jobs yet
    </md-toolbar>
</section>
