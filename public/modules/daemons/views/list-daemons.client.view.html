<section data-ng-controller="DaemonsController" data-ng-init="find()">
    <h1>Daemons</h1>

    <div class="pull-right">
        <md-button href="#!/admin/daemons/create" class="md-raised md-primary">
            <i class="fa fa-plus"> </i> New Daemon
        </md-button>
    </div>

    <table tr-ng-grid="" items="daemons" fields="" class="table">
        <thead>
        <tr>
            <th field-name="name" display-name="Name" enable-filtering="true"></th>
            <th field-name="dockerStatus" display-name="Status" enable-filtering="true"></th>
            <th field-name="host" display-name="Daemons" enable-filtering="true"></th>
            <th field-name="dockerVersion.Version" display-name="Version" enable-filtering="true"></th>
            <th>
                <div class="tr-ng-title">
                    Containers / Images
                </div>
            </th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td field-name="name">
                <md-button class="md-accent" href="#!/admin/daemons/view/{{gridItem._id}}">{{gridItem.name}}</md-button>
            </td>
            <td field-name="dockerStatus">
                <span ng-switch="gridItem.dockerStatus">
                    <span ng-switch-when="checking" class="label label-default">
                        <i ng-switch-when="checking" class="fa fa-spinner fa-spin"> </i> Checking
                    </span>
                    <span ng-switch-when="down" class="label label-danger">Down</span>
                    <span ng-switch-when="up" class="label label-success">UP</span>
                </span>
            </td>
            <td field-name="host">
                <div>
                    <a href="{{gridItem.protocol}}://{{gridItem.host}}:{{gridItem.port}}/info">{{gridItem.protocol}}://{{gridItem.host}}:{{gridItem.port}}</a>
                    <small><p class="list-group-item-text" data-ng-bind="gridItem.description"></p></small>
                    <md-button class="md-accent" ng-show="gridItem.cadvisorApi" href="{{gridItem.cadvisorUrl}}">
                        cAdvisor
                    </md-button>
                </div>
            </td>
            <td field-name="dockerVersion.Version">
                <div ng-show="gridItem.dockerStatusUp">{{gridItem.dockerVersion.Version}}</div>
            </td>
            <td>
                <div>
                    <a ng-show="gridItem.dockerStatusUp" class="btn btn-default btn-xs"
                       href="/#!/admin/daemons/view/containers/{{gridItem._id}}">
                        {{gridItem.dockerInfo.Containers}}
                        containers</a>
                </div>
                <div>
                    <a ng-show="gridItem.dockerStatusUp" class="btn btn-default btn-xs"
                       href="/#!/admin/daemons/view/images/{{gridItem._id}}">
                        {{gridItem.dockerInfo.Images}}
                        images</a>
                </div>
            </td>
        </tr>
        </tbody>
    </table>

    <div class="alert alert-warning text-center" data-ng-if="daemons.$resolved && !daemons.length">
        No daemons yet, why don't you <a href="/#!/admin/daemons/create">create one</a>?
    </div>

</section>
